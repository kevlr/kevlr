// ===============================================================
// =========================== options ===========================
// ===============================================================

// support
$ie8-9-support: true;
$moz22-27-support: true;

// css options
$box-sizing-border-box-on-every-element: true;

// ===============================================================
// ========================= grid system =========================
// ===============================================================

// ===================================
// ============= mixins ==============
// ===================================

// ===================================
// ========== general style ==========
// ===================================


@if $box-sizing-border-box-on-every-element == true {
	* {
		-webkit-box-sizing: border-box;
		-moz-box-sizing: border-box;
		box-sizing: border-box;
	}
	*:before, *:after {
		-webkit-box-sizing: border-box;
		-moz-box-sizing: border-box;
		box-sizing: border-box;
	}
}

// ========== clearfix ==========

%clearfix {
	&:before,
	&:after {
			content: " ";
			display: table;
			display: -webkit-flex;
			display: -ms-flexbox;
			display: flex;
	}

	&:after {
			clear: both;
	}
}

#{$clearfix} {
	width: 100%;
	@extend %clearfix;
}

// ===================================
// =========== main layout ===========
// ===================================

body {
	background-color: $primary-bg-color;
}

// ========== main layout container ==========

#{$container} {
	@if $container-max-width != none {
	max-width: $container-max-width;
	}
	min-width: $container-min-width;
	@if $container-align == center {
	margin: 0 auto;
	} @else if $container-align == right {
	margin: 0 0 0 auto;
	}
}

// ========== main layout row ==========

#{$row} {
	display: -webkit-flex;
	display: -ms-flexbox;
	display: flex;
	
	@if $moz22-27-support {
		@supports not (flex-wrap: wrap) {
			display: block;
		}
	}
	
	-webkit-flex-wrap: wrap;
	-ms-flex-wrap: wrap;
	flex-wrap: wrap;
	
	-webkit-align-items: flex-start;
	-ms-flex-align: start;
	align-items: flex-start;
	
	@if $ie8-9-support or $moz22-27-support {
		@extend %clearfix;
	}
}

#{$double-gutter} {
	margin-left: $column-gutter / 2;
	margin-right: $column-gutter / 2;
}

#{$no-gutter} {
	margin-left: -$column-gutter / 2;
	margin-right: -$column-gutter / 2;
}

// ========== main layout columns ==========

#{$column} {
	padding-left: $column-gutter / 2;
	padding-right: $column-gutter / 2;
	width: 100%;
	@if $ie8-9-support or $moz22-27-support {
	min-height: 1px;
	float: left;
	}
	@if $box-sizing-border-box-on-every-element == false {
		-webkit-box-sizing: border-box;
		-moz-box-sizing: border-box;
		box-sizing: border-box;
	}
}

// columns width

@for $i from 1 through $columns-number {
	#{$width}#{$i} {
		width: 100% / $columns-number * $i;
	}
}

// columns offset

@for $i from 1 through $columns-number {
	#{$offset}#{$i} {
		margin-left: 100% / $columns-number * $i;
	}
}

// ========== flex options ==========

// order

@for $i from nth($elements-to-order, 1) through nth($elements-to-order, 2) {
	#{$order}#{$i} {
		-webkit-order: #{$i};
		-ms-flex-order: #{$i};
		order: #{$i};
	}
}

// baseline align

#{$baseline-align} {
	-webkit-align-items: baseline;
	-ms-flex-align: baseline;
	align-items: baseline;
}

// bottom align

#{$bottom-align} {
	-webkit-align-items: flex-end;
	-ms-flex-align: end;
	align-items: flex-end;
}

// center align

#{$vertical-center-align} {
	-webkit-align-items: center;
	-ms-flex-align: center;
	align-items: center;
}

// equal height

#{$equal-height} {
	-webkit-align-items: stretch;
	-ms-flex-align: stretch;
	align-items: stretch;
}

// ========== display ==========

#{$inline} {
	display: inline;
}

#{$inline-block} {
	display: inline-block;
}

#{$flex} {
	display: -webkit-flex;
	display: -ms-flexbox;
	display: flex;
	
	@if $moz22-27-support {
		@supports not (flex-wrap: wrap) {
			display: block;
		}
	}
}

// ========== text alignment ==========

#{$text-left} {
	text-align: left;
}

#{$text-right} {
	text-align: right;
}

#{$text-center} {
	text-align: center;
}

#{$text-justify} {
	text-align: justify;
}

// ========== visibility ==========

#{$hidden} {
	display: none;
}

// ===================================
// ========== media queries ==========
// ===================================

@each $layout in $all-layouts {
	
	@if (nth($layout, 1)) {
	
		@include media(nth($layout, 1)) {
			
			// ========== responsive container ==========
			
			#{$container} {
				max-width: nth($layout, 5);
			}
			
			// ========== responsive row ==========
			
			#{$double-gutter} {
				margin-left: nth($layout, 4) / 2;
				margin-right: nth($layout, 4) / 2;
			}
			
			#{$no-gutter} {
				margin-left: -(nth($layout, 4) / 2);
				margin-right: -(nth($layout, 4) / 2);
			}
			
			// ========== responsive columns ==========
			
			#{$column} {
				padding-left: - (nth($layout, 4) / -2);
				padding-right: - (nth($layout, 4) / -2);
			}
			
			// columns width

			@for $i from 1 through nth($layout, 3) {
				#{$width}#{$i}_#{nth($layout, 1)} {
					width: 100% / nth($layout, 3) * $i;
				}
			}

			// columns offset

			@for $i from 1 through nth($layout, 3) {
				#{$offset}#{$i}_#{nth($layout, 1)} {
					margin-left: 100% / nth($layout, 3) * $i;
				}
			}

			// ========== responsive flex options ==========

			// responsive order

			@for $i from nth($elements-to-order, 1) through nth($elements-to-order, 2) {
				.order#{$i}_#{nth($layout, 1)} {
					-webkit-order: #{$i};
					-ms-flex-order: #{$i};
					order: #{$i};
				}
			}

			// responsive text alignment

			#{$text-left}_#{nth($layout, 1)} {
				text-align: left;
			}

			#{$text-right}_#{nth($layout, 1)} {
				text-align: right;
			}

			#{$text-center}_#{nth($layout, 1)} {
				text-align: center;
			}

			#{$text-justify}_#{nth($layout, 1)} {
				text-align: justify;
			}

			// ========== responsive visibility ==========

			#{$hidden}_#{nth($layout, 1)} {
				display: none;
			}

			#{$visible}_#{nth($layout, 1)} {
				display: block;
				
				&#{$inline} {
					display: inline;
				}

				&#{$inline-block} {
					display: inline-block;
				}

				&#{$flex},
				&#{$row} {
					display: -webkit-flex;
					display: -ms-flexbox;
					display: flex;
					
					@if $moz22-27-support {
						@supports not (flex-wrap: wrap) {
							display: block;
						}
					}
				}
			}
		}

	}

}
